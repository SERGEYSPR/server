<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Список студентов</title>

    <style>
        body {
            font-family: Calibri;
            font-size: 14px;
            margin: 0px;
            padding: 10px;
        }
    </style>

	<script src="http://code.jquery.com/jquery-2.1.0.min.js" type="text/javascript"></script>

    <script>

        var students = null;

        jQuery.support.cors = true;
        $(document).ready(function () {
			
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'http://107.170.103.201/api/student/get', true);

            xhr.onload = function () {

                students = JSON.parse(xhr.responseText);

                for (var i = 0; i < students.length; i++)
                {
                    var div = document.createElement('div');

                    div.id = new Number(i);
                    $(div).css({ padding: '4px', borderBottom: '1px solid #dfdfdf', cursor: 'pointer' });
                    $(div).text(students[i].Id + '. ' + students[i].SecondName + ' ' + students[i].FirstName + ' ' + students[i].MiddleName);
                    $(div).click(function () {
                        
                        var index = new Number(this.id);

                        $('#name').text(
                            students[index].SecondName + ' ' + 
                            students[index].FirstName + ' ' + 
                            students[index].MiddleName);

                        if (students[index].City !== "")
                        {
                            $('#address').text(
                                'Адрес: ' +
                                students[index].Region + ', ' +
                                students[index].City + ', ' +
                                students[index].Street + ', дом ' +
                                students[index].House + ', кв. ' +
                                students[index].Flat);
                        }
                        else
                        {
                            $('#address').text(
                                'Адрес: ' +
                                students[index].Region + ', ' +
                                students[index].District + ' район, c. ' +
                                students[index].Town + ', ' +
                                students[index].Street + ', дом ' +
                                students[index].House);
                        }

                        $('#birthday').text('День рождения: ' + students[index].Birthday);
                        $('#phone').text('Телефон: 8 (123) 456-78-90');
                    });

                    document.getElementById('studentList').appendChild(div);
                }
            };

            xhr.onerror = function () {
                console.log('There was an error!');
            };

            var params = {};
            params.Fields = 'Id, SecondName, FirstName, MiddleName';

            xhr.send(JSON.stringify(params));
        });
        
    </script>

</head>

<body>
    <div id="studentList" style="display: inline-block; width: 25%; min-width: 300px;"></div>
    <div style="display: inline-block; padding-left: 20px; vertical-align: top; width: 65%;">
        <div id="name" style="text-shadow: 0px 0px 1px #444; font-size: 32px;"></div>
        <div id="address" style="padding: 2px 0px"></div>
        <div id="birthday" style="padding: 2px 0px"></div>
        <div id="phone" style="padding: 2px 0px"></div>
    </div>
</body>
</html>